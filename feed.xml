<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.3">Jekyll</generator><link href="http://jonatasleon.com/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="http://jonatasleon.com/blog/" rel="alternate" type="text/html" /><updated>2019-04-01T01:42:05+00:00</updated><id>http://jonatasleon.com/blog/feed.xml</id><title type="html">Jonatas Leon</title><subtitle>Blog pessoal sobre programação, tecnologia, a vida, o universo e tudo mais.</subtitle><entry><title type="html">vimgrep: Pesquisando por texto sem sair do vim</title><link href="http://jonatasleon.com/blog/vimgrep-pesquisando-por-texto-sem-sair-vim/" rel="alternate" type="text/html" title="vimgrep: Pesquisando por texto sem sair do vim" /><published>2019-03-31T19:39:00+00:00</published><updated>2019-03-31T19:39:00+00:00</updated><id>http://jonatasleon.com/blog/vimgrep-pesquisando-por-texto-sem-sair-vim</id><content type="html" xml:base="http://jonatasleon.com/blog/vimgrep-pesquisando-por-texto-sem-sair-vim/">&lt;p&gt;Para quem está iniciando com vim ou o utiliza eventualmente, pode parecer comum
sair do editor quando precisa utilizar o &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; para pesquisar por algum trecho
de texto entre os arquivos. Depois de descobrir como utilizar o comando
&lt;code class=&quot;highlighter-rouge&quot;&gt;vimgrep&lt;/code&gt;, se torna muito prático fazer buscas no próprio editor de texto ao
invés de ter todo o trabalho de voltar para o terminal, fazer a busca e, só
então, abrir o arquivo com o resultado no vim.&lt;/p&gt;

&lt;h2 id=&quot;comandos-no-vim&quot;&gt;Comandos no vim&lt;/h2&gt;

&lt;p&gt;Se você já aprendeu como sair do vim sem ter que fechar a janela do terminal
(&lt;code class=&quot;highlighter-rouge&quot;&gt;:wqa&lt;/code&gt;), sabe que para executar um comando no vim basta digitar &lt;code class=&quot;highlighter-rouge&quot;&gt;:&lt;/code&gt; que então
o cursor é transferido para a parte inferior da sua janela, onde é possível
inserir os comandos que serão mostrados ao longo deste artigo.&lt;/p&gt;

&lt;p&gt;A cada exemplo, o vim será aberto com &lt;code class=&quot;highlighter-rouge&quot;&gt;vim -u NONE&lt;/code&gt;, para garantir que
o arquivo de de configuração (&lt;code class=&quot;highlighter-rouge&quot;&gt;vimrc&lt;/code&gt;) não seja carregado e, assim, o vim seja
executado puro, sem qualquer plugin ou modificação.&lt;/p&gt;

&lt;h2 id=&quot;vimgrep&quot;&gt;vimgrep&lt;/h2&gt;

&lt;p&gt;vimgrep é um comando nativo dentro do próprio vim. Isso traz praticidade para
quem utiliza o vim de maneira eventual, pois não há necessidade de realizar
configurações adicionais.&lt;/p&gt;

&lt;p&gt;Antes de continuar, tenha em mente que todas as buscas serão realizadas
a partir do diretório em que vim foi executado. Para confirmar o diretório,
digite &lt;code class=&quot;highlighter-rouge&quot;&gt;:pwd&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;o-básico&quot;&gt;O básico&lt;/h3&gt;

&lt;p&gt;Assim Você pode utilizar o vimgrep da seguinte maneira:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:vimgrep config **/*.js
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A descrição de cada parte do comando:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;vimgrep&lt;/code&gt;: o comando propriamente dito;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;config&lt;/code&gt;: o termo que se está pesquisando;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;**/*.js&lt;/code&gt;: uma designação coringa (&lt;code class=&quot;highlighter-rouge&quot;&gt;wildcard&lt;/code&gt;) que determina em quais arquivo será realizada a pequisa, assim, tais símbolos representam:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;**&lt;/code&gt;: todos subdiretórios a partir do diretório atual (saiba mais digitando &lt;code class=&quot;highlighter-rouge&quot;&gt;:help starstart-wildcard&lt;/code&gt;);&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;*.js&lt;/code&gt;: todos os arquivos com final igual a &lt;code class=&quot;highlighter-rouge&quot;&gt;.js&lt;/code&gt;;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;script id=&quot;asciicast-237787&quot; src=&quot;https://asciinema.org/a/237787.js&quot; async=&quot;&quot;&gt;&lt;/script&gt;

&lt;center&gt;
    &lt;small&gt;vimgrep básico&lt;/small&gt;
&lt;/center&gt;

&lt;h3 id=&quot;pesquisando-por-padrões&quot;&gt;Pesquisando por padrões&lt;/h3&gt;

&lt;p&gt;Também é possível utiliza padrões de expressões regulares (&lt;em&gt;regex&lt;/em&gt;):&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:vimgrep /config.*builder/ **/*.js
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A diferença entre este comando e o anterior está na maneira com que o termo
pesquisado é utilizado. Temos em &lt;code class=&quot;highlighter-rouge&quot;&gt;/config.*builder/&lt;/code&gt; o padrão desejado,
ignorando &lt;code class=&quot;highlighter-rouge&quot;&gt;/&lt;/code&gt;, que é utilizado para determinar o início e o fim do padrão. Com
essa representação se procura um trecho que tenha as palavras &lt;code class=&quot;highlighter-rouge&quot;&gt;config&lt;/code&gt;
e &lt;code class=&quot;highlighter-rouge&quot;&gt;builder&lt;/code&gt;, as quais devem ocorrer na ordem que foram declaradas e estar na
mesma linha, podendo, ou não, haver qualquer texto entres cada palavra. Veja
mais aqui: http://vimregex.com.&lt;/p&gt;

&lt;script id=&quot;asciicast-237827&quot; src=&quot;https://asciinema.org/a/237827.js&quot; async=&quot;&quot;&gt;&lt;/script&gt;

&lt;center&gt;
    &lt;small&gt;Pesquisando por padrões&lt;/small&gt;
&lt;/center&gt;

&lt;h3 id=&quot;navegando-entre-os-resultados&quot;&gt;Navegando entre os resultados&lt;/h3&gt;

&lt;p&gt;Geralmente, mais de um resultado é obtido em pesquisas deste tipo, assim,
navegar entre os demais trechos encontrados é fundamental.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;:cn&lt;/code&gt;: exibe o próximo resultado;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;:cp&lt;/code&gt;: exibe o resultado anterior;&lt;/li&gt;
&lt;/ul&gt;

&lt;script id=&quot;asciicast-237950&quot; src=&quot;https://asciinema.org/a/237950.js&quot; async=&quot;&quot;&gt;&lt;/script&gt;

&lt;center&gt;
    &lt;small&gt;Navegando entre resultados&lt;/small&gt;
&lt;/center&gt;

&lt;h3 id=&quot;uma-melhor-apresentação---quickfix&quot;&gt;Uma melhor apresentação - &lt;em&gt;QuickFix&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;Ainda há uma maneira de exibir os resultados de forma mais agradável, digite
&lt;code class=&quot;highlighter-rouge&quot;&gt;:copen&lt;/code&gt; e se abrirá a janela de apresentação de erros, chamada de &lt;em&gt;QuickFix&lt;/em&gt;,
neste caso, o que é mostrado nela são os resultados da pesquisa realizada.&lt;/p&gt;

&lt;script id=&quot;asciicast-237951&quot; src=&quot;https://asciinema.org/a/237951.js&quot; async=&quot;&quot;&gt;&lt;/script&gt;

&lt;center&gt;
    &lt;small&gt;Listando resultados em &lt;i&gt;QuickFix&lt;/i&gt;&lt;/small&gt;
&lt;/center&gt;

&lt;p&gt;Também é possível fazer tudo em um único comando:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:vimgrep exemplo ** | cw
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Com isso, o resultado será exibido normalmente e a janela de &lt;em&gt;QuickFix&lt;/em&gt; já
estará aberta.&lt;/p&gt;

&lt;p&gt;Para trocar de janela, pressione &lt;code class=&quot;highlighter-rouge&quot;&gt;CTRL + W&lt;/code&gt; duas vezes (&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;CTRL-W&amp;gt;&amp;lt;CTRL-W&amp;gt;&lt;/code&gt;).&lt;/p&gt;

&lt;h2 id=&quot;criando-um-comando-findall&quot;&gt;Criando um comando: &lt;code class=&quot;highlighter-rouge&quot;&gt;FindAll&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Agora que já sabemos como realizar pesquisas ao longo dos arquivos no diretório
atual, é interessante criar um comando que facilite buscas genéricas.&lt;/p&gt;

&lt;p&gt;Para criar um comando digite:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:command! -nargs=1 FindAll :execute &quot;vimgrep /&amp;lt;args&amp;gt;/gj **&quot; | cw
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Dessa forma:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;command!&lt;/code&gt;: designa a criação de um novo comando, a exclamação (&lt;code class=&quot;highlighter-rouge&quot;&gt;!&lt;/code&gt;) define que substitua o comando caso ele já exista;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-nargs=1&lt;/code&gt;: determina a quantidade de parâmetros que o comando irá receber, neste caso, apenas 1;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;FindAll&lt;/code&gt;: o nome do novo comando;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;:execute&lt;/code&gt;: executa comandos a partir de &lt;em&gt;strings&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;vimgrep /&amp;lt;args&amp;gt;/gj **&quot;&lt;/code&gt;: neste caso, temos algumas coisas não utilizadas anteriormente:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;g&lt;/code&gt;: determina que todos resultados sejam adicionados, por mais que se repitam na mesma linha;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;j&lt;/code&gt;: faz com que apenas a janela &lt;em&gt;QuickFix&lt;/em&gt; seja atualizada, sem sair do arquivo atual e pular para o primeiro resultado;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Para evitar que seja necessário criar o comando toda vez que abrir o vim,
adicione o comando ao arquivo &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.vimrc&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;ignorando-diretórios&quot;&gt;Ignorando diretórios&lt;/h2&gt;

&lt;p&gt;Em alguns casos, não desejamos que as pesquisas sejam realizadas em
determinados diretórios, para isso vamos redefinir a opção de configuração
&lt;code class=&quot;highlighter-rouge&quot;&gt;wildignore&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set wildignore+=*/node_modules/*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Com isso, a busca não mais ocorrerá nos arquivos dentro do diretório
&lt;code class=&quot;highlighter-rouge&quot;&gt;node_modules&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Para visualizar arquivos e diretórios que estão ignorados:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set wildignore?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Também é possível remover um diretório da lista de ignorados:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set wildignore-=*/node_modules/*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Para saber mais &lt;code class=&quot;highlighter-rouge&quot;&gt;:help wildignore&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;conclusão&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Com tudo que foi mostrado, sabemos como:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Procurar um termo, seja ele específico ou um padrão, em vários arquivos, filtrando pela extensão ou não;&lt;/li&gt;
  &lt;li&gt;Navegar entre os resultados, podendo visualizá-los na janela &lt;em&gt;QuickFix&lt;/em&gt;;&lt;/li&gt;
  &lt;li&gt;Criar um comando genérico que facilite a pesquisa;&lt;/li&gt;
  &lt;li&gt;Definir diretórios ou arquivos para serem ignorados pela busca, baseados em coringas (&lt;code class=&quot;highlighter-rouge&quot;&gt;wildcards&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Agora, para para procurar por qualquer termo, você não precisa mais sair do vim, seja por
praticidade ou por não lembrar como. &lt;strong&gt;:D&lt;/strong&gt;&lt;/p&gt;</content><author><name></name></author><category term="vi" /><category term="vim" /><category term="vimgrep" /><category term="grep" /><category term="multiplos" /><category term="varios" /><category term="arquivos" /><summary type="html">Para quem está iniciando com vim ou o utiliza eventualmente, pode parecer comum sair do editor quando precisa utilizar o grep para pesquisar por algum trecho de texto entre os arquivos. Depois de descobrir como utilizar o comando vimgrep, se torna muito prático fazer buscas no próprio editor de texto ao invés de ter todo o trabalho de voltar para o terminal, fazer a busca e, só então, abrir o arquivo com o resultado no vim.</summary></entry><entry><title type="html">Manipulação de Dados Multidimensionais com Python</title><link href="http://jonatasleon.com/blog/python-para-dados-multidimensionais/" rel="alternate" type="text/html" title="Manipulação de Dados Multidimensionais com Python" /><published>2019-01-18T01:09:00+00:00</published><updated>2019-01-18T01:09:00+00:00</updated><id>http://jonatasleon.com/blog/python-para-dados-multidimensionais</id><content type="html" xml:base="http://jonatasleon.com/blog/python-para-dados-multidimensionais/">&lt;p&gt;Conteúdo rápido para consultas posteriores sobre manipulação de dados multidimensionais com Python.&lt;/p&gt;

&lt;p&gt;Dependências:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Python 3.x;&lt;/li&gt;
  &lt;li&gt;Jupyter Notebooks;&lt;/li&gt;
  &lt;li&gt;xarray;&lt;/li&gt;
  &lt;li&gt;dask;&lt;/li&gt;
  &lt;li&gt;matplotlib;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;O trecho de código abaixo realiza o download dos dados de Ventos do Mar Misturados (&lt;a href=&quot;https://www.ncdc.noaa.gov/data-access/marineocean-data/blended-global/blended-sea-winds&quot; title=&quot;Blended Sea Winds&quot;&gt;Blended Sea Winds&lt;/a&gt;) para o ano de 2017. Para alterar o período de tempo, altere a string de &lt;em&gt;matching&lt;/em&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;'uv2017010?rt.nc'&lt;/code&gt;, supondo que você queira adquirir dados de todo o ano de 2017, &lt;code class=&quot;highlighter-rouge&quot;&gt;'uv2017????rt.nc'&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ftplib&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;fnmatch&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ftp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ftplib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'eclipse.ncdc.noaa.gov'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Define servidor FTP a ser acessado&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ftp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Realiza autenticação perante o servidor&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ftp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/pub/seawinds/SI/uv/daily/netcdf/2000s'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Define diretório atual&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ftp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nlst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Lista diretórios e arquivos no diretório atual&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fnmatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'uv2017010?rt.nc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Filtra arquivos desejados&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Coloca os arquivos em ordem alfabética&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ftp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retrbinary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'RETR {}'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Agora vamos abrir os arquivos obtidos:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;xarray&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open_mfdataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filenames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A função &lt;a href=&quot;http://xarray.pydata.org/en/stable/generated/xarray.open_mfdataset.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;open_mfdataset&lt;/code&gt;&lt;/a&gt; recebe a lista de arquivos para abrir e retorna um objeto &lt;a href=&quot;http://xarray.pydata.org/en/stable/generated/xarray.Dataset.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;xarray.Dataset&lt;/code&gt;&lt;/a&gt;. O resultado de &lt;code class=&quot;highlighter-rouge&quot;&gt;print(ds)&lt;/code&gt; são os metadados dos dados abertos.&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;xarray.Dataset&amp;gt;
Dimensions:  (lat: 719, lon: 1440, time: 9, zlev: 1)
Coordinates:
  * zlev     (zlev) float32 10.0
  * lat      (lat) float32 -89.75 -89.5 -89.25 -89.0 ... 89.0 89.25 89.5 89.75
  * lon      (lon) float32 0.0 0.25 0.5 0.75 1.0 ... 359.0 359.25 359.5 359.75
  * time     (time) datetime64[ns] 2017-01-01T09:00:00 ... 2017-01-09T09:00:00
Data variables:
    u        (time, zlev, lat, lon) float32 nan nan nan nan ... nan nan nan nan
    v        (time, zlev, lat, lon) float32 nan nan nan nan ... nan nan nan nan
    w        (time, zlev, lat, lon) float32 nan nan nan nan ... 0.0 0.0 0.0 0.0
Attributes:
    Conventions:         COARDS, CF-1.0, Unidata Dataset Discovery v1.0
    title:               NOAA/NCDC Blended daily 0.25-degree Sea Surface Winds
    source:              Multiple satellite observations: DMSP SSMI F08, F10,...
    summary:             Gridded and blended sea surface vector winds from mu...
    Keywords:            sea winds, ocean winds, sea surface winds, air-sea i...
    references:          links at http://www.ncdc.noaa.gov/oa/rsad/blendedsea...
    History:             Simple spatiotemporally weighted Interpolation (SI),...
    institution:         NOAA NESDIS National Climatic Data Center
    Contact:             Huai-Min.Zhang AT noaa.gov or satorder AT noaa.gov; ...
    Acknowledgment:      The gridded data were generated from the multiple sa...
    Data_Calendar_Date:  2017-01-01
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Para calcular a magnitude de &lt;code class=&quot;highlighter-rouge&quot;&gt;'u'&lt;/code&gt; e &lt;code class=&quot;highlighter-rouge&quot;&gt;'v'&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;mag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'u'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'v'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Obs.: Um material para consulta, &lt;a href=&quot;http://www.iag.usp.br/~agg_1400200/moddata/METEOROLOGIA/5_Vento_completo.pdf&quot;&gt;aqui&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Para gerar gráficos, vamos utilizar a api da biblioteca &lt;a href=&quot;http://xarray.pydata.org/en/stable/plotting.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;xarray&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zlev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'lon'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'lat'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'time'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_wrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;../images/2019/01/plotting-magnitude-serie-temporal.png&quot; alt=&quot;Plotting magnitude série temporal&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="python" /><summary type="html">Conteúdo rápido para consultas posteriores sobre manipulação de dados multidimensionais com Python.</summary></entry></feed>